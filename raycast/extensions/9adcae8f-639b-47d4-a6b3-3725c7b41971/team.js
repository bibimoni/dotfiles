"use strict";var Ie=Object.create;var G=Object.defineProperty;var Pe=Object.getOwnPropertyDescriptor;var Ue=Object.getOwnPropertyNames;var Re=Object.getPrototypeOf,De=Object.prototype.hasOwnProperty;var Le=(e,t)=>{for(var n in t)G(e,n,{get:t[n],enumerable:!0})},oe=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of Ue(t))!De.call(e,l)&&l!==n&&G(e,l,{get:()=>t[l],enumerable:!(r=Pe(t,l))||r.enumerable});return e};var H=(e,t,n)=>(n=e!=null?Ie(Re(e)):{},oe(t||!e||!e.__esModule?G(n,"default",{value:e,enumerable:!0}):n,e)),Me=e=>oe(G({},"__esModule",{value:!0}),e);var Je={};Le(Je,{default:()=>ve});module.exports=Me(Je);var U=require("@raycast/api");var s=require("@raycast/api");var L=require("react");var re=require("@raycast/api");async function K(e){let t=await re.LocalStorage.getItem(e);return t==null?null:JSON.parse(t)}async function _(e,t){let n=JSON.stringify(t);await re.LocalStorage.setItem(e,n)}function J(){let[e,t]=(0,L.useState)([]),[n,r]=(0,L.useState)([]),[l,h]=(0,L.useState)([]);async function m(c){if(c.type==="team"){let i=e.filter(f=>f.id!==c.value.id);return t([...i,c.value]),_("favoriteTeams",[...i,c.value])}if(c.type==="player"){let i=n.filter(f=>f.id!==c.value.id);return r([...i,c.value]),_("favoritePlayers",[...i,c.value])}if(c.type==="league"){let i=l.filter(f=>f.id!==c.value.id);return h([...i,c.value]),_("favoriteLeagues",[...i,c.value])}}async function u(c,i){if(c==="team"){let f=e.filter(w=>w.id!==i);return t(f),_("favoriteTeams",f)}if(c==="player"){let f=n.filter(w=>w.id!==i);return r(f),_("favoritePlayers",f)}if(c==="league"){let f=l.filter(w=>w.id!==i);return h(f),_("favoriteLeagues",f)}}async function d(){let c=await K("favoriteTeams"),i=await K("favoritePlayers"),f=await K("favoriteLeagues");c&&t(c),i&&r(i),f&&h(f)}return(0,L.useEffect)(()=>{d()},[]),(0,L.useMemo)(()=>({teams:e,players:n,leagues:l,addItems:m,removeItems:u,reloadData:d}),[e,n,l])}var $=H(require("react")),x=require("@raycast/api");var ce=Object.prototype.hasOwnProperty;function Z(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Z(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(ce.call(e,n)&&++r&&!ce.call(t,n)||!(n in t)||!Z(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}var F=H(require("node:fs")),q=H(require("node:path")),me=H(require("node:crypto"));var he=require("react/jsx-runtime");function _e(e){let t=(0,$.useRef)(e),n=(0,$.useRef)(0);return Z(e,t.current)||(t.current=e,n.current+=1),(0,$.useMemo)(()=>t.current,[n.current])}function P(e){let t=(0,$.useRef)(e);return t.current=e,t}function Fe(e,t){let n=e instanceof Error?e.message:String(e);return(0,x.showToast)({style:x.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??n,primaryAction:t?.primaryAction??le(e),secondaryAction:t?.primaryAction?le(e):void 0})}var le=e=>{let t=!0,n="[Extension Name]...",r="";try{let m=JSON.parse((0,F.readFileSync)((0,q.join)(x.environment.assetsPath,"..","package.json"),"utf8"));n=`[${m.title}]...`,r=`https://raycast.com/${m.owner||m.author}/${m.name}`,(!m.owner||m.access==="public")&&(t=!1)}catch{}let l=x.environment.isDevelopment||t,h=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:l?"Copy Logs":"Report Error",onAction(m){m.hide(),l?x.Clipboard.copy(h):(0,x.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(n)}&extension-url=${encodeURI(r)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${h}
\`\`\`
`)}`)}}};function Oe(e,t,n){let r=(0,$.useRef)(0),[l,h]=(0,$.useState)({isLoading:!0}),m=P(e),u=P(n?.abortable),d=P(t||[]),c=P(n?.onError),i=P(n?.onData),f=P(n?.onWillExecute),w=P(n?.failureToastOptions),a=P(l.data),g=(0,$.useRef)(null),b=(0,$.useRef)({page:0}),v=(0,$.useRef)(!1),y=(0,$.useRef)(!0),C=(0,$.useRef)(50),E=(0,$.useCallback)(()=>(u.current&&(u.current.current?.abort(),u.current.current=new AbortController),++r.current),[u]),T=(0,$.useCallback)((...D)=>{let I=E();f.current?.(D),h(k=>({...k,isLoading:!0}));let N=Ne(m.current)(...D);function V(k){return k.name=="AbortError"||I===r.current&&(c.current?c.current(k):x.environment.launchType!==x.LaunchType.Background&&Fe(k,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(M){M.hide(),g.current?.(...d.current||[])}},...w.current}),h({error:k,isLoading:!1})),k}return typeof N=="function"?(v.current=!0,N(b.current).then(({data:k,hasMore:M,cursor:Ae})=>(I===r.current&&(b.current&&(b.current.cursor=Ae,b.current.lastItem=k?.[k.length-1]),i.current&&i.current(k,b.current),M&&(C.current=k.length),y.current=M,h(Ee=>b.current.page===0?{data:k,isLoading:!1}:{data:(Ee.data||[])?.concat(k),isLoading:!1})),k),k=>(y.current=!1,V(k)))):(v.current=!1,N.then(k=>(I===r.current&&(i.current&&i.current(k),h({data:k,isLoading:!1})),k),V))},[i,c,d,m,h,g,f,b,w,E]);g.current=T;let R=(0,$.useCallback)(()=>{b.current={page:0};let D=d.current||[];return T(...D)},[T,d]),O=(0,$.useCallback)(async(D,I)=>{let N;try{if(I?.optimisticUpdate){E(),typeof I?.rollbackOnError!="function"&&I?.rollbackOnError!==!1&&(N=structuredClone(a.current?.value));let V=I.optimisticUpdate;h(k=>({...k,data:V(k.data)}))}return await D}catch(V){if(typeof I?.rollbackOnError=="function"){let k=I.rollbackOnError;h(M=>({...M,data:k(M.data)}))}else I?.optimisticUpdate&&I?.rollbackOnError!==!1&&h(k=>({...k,data:N}));throw V}finally{I?.shouldRevalidateAfter!==!1&&(x.environment.launchType===x.LaunchType.Background||x.environment.commandMode==="menu-bar"?await R():R())}},[R,a,h,E]),B=(0,$.useCallback)(()=>{b.current.page+=1;let D=d.current||[];T(...D)},[b,d,T]);(0,$.useEffect)(()=>{b.current={page:0},n?.execute!==!1?T(...t||[]):E()},[_e([t,n?.execute,T]),u,b]),(0,$.useEffect)(()=>()=>{E()},[E]);let Se=n?.execute!==!1?l.isLoading:!1,Te={...l,isLoading:Se},Ce=v.current?{pageSize:C.current,hasMore:y.current,onLoadMore:B}:void 0;return{...Te,revalidate:R,mutate:O,pagination:Ce}}function Ne(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function ue(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function Ve(e){return e instanceof URLSearchParams?e.toString():e}function pe(e,t=[]){function n(r){return"update"in e?e.update(r,"utf8"):e.write(r)}return{dispatch:function(r){r=Ve(r),r===null?this._null():this["_"+typeof r](r)},_object:function(r){let l=/\[object (.*)\]/i,h=Object.prototype.toString.call(r),m=l.exec(h)?.[1]??"unknown:["+h+"]";m=m.toLowerCase();let u=null;if((u=t.indexOf(r))>=0){this.dispatch("[CIRCULAR:"+u+"]");return}else t.push(r);if(Buffer.isBuffer(r))return n("buffer:"),n(r.toString("utf8"));if(m!=="object"&&m!=="function"&&m!=="asyncfunction")if(this["_"+m])this["_"+m](r);else throw new Error('Unknown object type "'+m+'"');else{let d=Object.keys(r);d=d.sort(),ue(r)||d.splice(0,0,"prototype","__proto__","constructor"),n("object:"+d.length+":");let c=this;return d.forEach(function(i){c.dispatch(i),n(":"),c.dispatch(r[i]),n(",")})}},_array:function(r,l){l=typeof l<"u"?l:!1;let h=this;if(n("array:"+r.length+":"),!l||r.length<=1){r.forEach(function(d){h.dispatch(d)});return}let m=[],u=r.map(function(d){let c=We(),i=t.slice();return pe(c,i).dispatch(d),m=m.concat(i.slice(t.length)),c.read().toString()});t=t.concat(m),u.sort(),this._array(u,!1)},_date:function(r){n("date:"+r.toJSON())},_symbol:function(r){n("symbol:"+r.toString())},_error:function(r){n("error:"+r.toString())},_boolean:function(r){n("bool:"+r.toString())},_string:function(r){n("string:"+r.length+":"),n(r.toString())},_function:function(r){n("fn:"),ue(r)?this.dispatch("[native]"):this.dispatch(r.toString()),this.dispatch("function-name:"+String(r.name)),this._object(r)},_number:function(r){n("number:"+r.toString())},_xml:function(r){n("xml:"+r.toString())},_null:function(){n("Null")},_undefined:function(){n("Undefined")},_regexp:function(r){n("regex:"+r.toString())},_uint8array:function(r){n("uint8array:"),this.dispatch(Array.prototype.slice.call(r))},_uint8clampedarray:function(r){n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(r))},_int8array:function(r){n("int8array:"),this.dispatch(Array.prototype.slice.call(r))},_uint16array:function(r){n("uint16array:"),this.dispatch(Array.prototype.slice.call(r))},_int16array:function(r){n("int16array:"),this.dispatch(Array.prototype.slice.call(r))},_uint32array:function(r){n("uint32array:"),this.dispatch(Array.prototype.slice.call(r))},_int32array:function(r){n("int32array:"),this.dispatch(Array.prototype.slice.call(r))},_float32array:function(r){n("float32array:"),this.dispatch(Array.prototype.slice.call(r))},_float64array:function(r){n("float64array:"),this.dispatch(Array.prototype.slice.call(r))},_arraybuffer:function(r){n("arraybuffer:"),this.dispatch(new Uint8Array(r))},_url:function(r){n("url:"+r.toString())},_map:function(r){n("map:");let l=Array.from(r);this._array(l,!0)},_set:function(r){n("set:");let l=Array.from(r);this._array(l,!0)},_file:function(r){n("file:"),this.dispatch([r.name,r.size,r.type,r.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){n("domwindow")},_bigint:function(r){n("bigint:"+r.toString())},_process:function(){n("process")},_timer:function(){n("timer")},_pipe:function(){n("pipe")},_tcp:function(){n("tcp")},_udp:function(){n("udp")},_tty:function(){n("tty")},_statwatcher:function(){n("statwatcher")},_securecontext:function(){n("securecontext")},_connection:function(){n("connection")},_zlib:function(){n("zlib")},_context:function(){n("context")},_nodescript:function(){n("nodescript")},_httpparser:function(){n("httpparser")},_dataview:function(){n("dataview")},_signal:function(){n("signal")},_fsevent:function(){n("fsevent")},_tlswrap:function(){n("tlswrap")}}}function We(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function ze(e,t){let n=this[e];return n instanceof Date?`__raycast_cached_date__${n.toString()}`:Buffer.isBuffer(n)?`__raycast_cached_buffer__${n.toString("base64")}`:t}function je(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function fe(e){let t=me.default.createHash("sha1");return pe(t).dispatch(e),t.digest("hex")}var Be=Symbol("cache without namespace"),de=new Map;function Ge(e,t,n){let r=n?.cacheNamespace||Be,l=de.get(r)||de.set(r,new x.Cache({namespace:n?.cacheNamespace})).get(r);if(!l)throw new Error("Missing cache");let h=P(e),m=P(t),u=(0,$.useSyncExternalStore)(l.subscribe,()=>{try{return l.get(h.current)}catch(f){console.error("Could not get Cache data:",f);return}}),d=(0,$.useMemo)(()=>{if(typeof u<"u"){if(u==="undefined")return;try{return JSON.parse(u,je)}catch(f){return console.warn("The cached data is corrupted",f),m.current}}else return m.current},[u,m]),c=P(d),i=(0,$.useCallback)(f=>{let w=typeof f=="function"?f(c.current):f;if(typeof w>"u")l.set(h.current,"undefined");else{let a=JSON.stringify(w,ze);l.set(h.current,a)}return w},[l,h,c]);return[d,i]}var W=Symbol();function ge(e,t,n){let{initialData:r,keepPreviousData:l,internal_cacheKeySuffix:h,...m}=n||{},u=(0,$.useRef)(null),[d,c]=Ge(fe(t||[])+h,W,{cacheNamespace:fe(e)}),i=(0,$.useRef)(d!==W?d:r),f=(0,$.useRef)(void 0),{mutate:w,revalidate:a,...g}=Oe(e,t||[],{...m,onData(E,T){f.current=T,m.onData&&m.onData(E,T),!(T&&T.page>0)&&(u.current="promise",i.current=E,c(E))}}),b,v=g.pagination;f.current&&f.current.page>0&&g.data?b=g.data:u.current==="promise"?b=i.current:l&&d!==W?(b=d,v&&(v.hasMore=!0,v.pageSize=d.length)):l&&d===W?b=i.current:d!==W?(b=d,v&&(v.hasMore=!0,v.pageSize=d.length)):b=r;let y=P(b),C=(0,$.useCallback)(async(E,T)=>{let R;try{if(T?.optimisticUpdate){typeof T?.rollbackOnError!="function"&&T?.rollbackOnError!==!1&&(R=structuredClone(y.current));let O=T.optimisticUpdate(y.current);u.current="cache",i.current=O,c(O)}return await w(E,{shouldRevalidateAfter:T?.shouldRevalidateAfter})}catch(O){if(typeof T?.rollbackOnError=="function"){let B=T.rollbackOnError(y.current);u.current="cache",i.current=B,c(B)}else T?.optimisticUpdate&&T?.rollbackOnError!==!1&&(u.current="cache",i.current=R,c(R));throw O}},[c,w,y,i,u]);return(0,$.useEffect)(()=>{d!==W&&(u.current="cache",i.current=d)},[d]),{data:b,isLoading:g.isLoading,error:g.error,mutate:f.current&&f.current.page>0?w:C,pagination:v,revalidate:a}}async function ye(){let t=await fetch("http://46.101.91.154:6006/");if(!t.ok)throw new Error("Failed to fetch header token");return await t.json()}function be(e){let{data:t,error:n,isLoading:r}=ge(async u=>{let d=`https://www.fotmob.com/api/teams?id=${u}`,c=await ye(),i=await fetch(d,{headers:c});if(!i.ok)throw new Error("Failed to fetch team details");return await i.json()},[e],{initialData:void 0}),l=u=>{if(!u?.fixtures?.allFixtures?.fixtures)return{...u,calculated:{upcomingMatch:null,ongoingMatch:null,previousMatches:[],nextMatches:[],currentLeaguePosition:void 0,recentFormString:void 0,nextMatchCountdown:void 0,teamFormResults:void 0}};let d=u.fixtures.allFixtures.fixtures,c=u.fixtures.allFixtures.nextMatch,i=c?.status.ongoing?c:null,f=d.filter(y=>y.status.finished).sort((y,C)=>new Date(C.status.utcTime).getTime()-new Date(y.status.utcTime).getTime()).slice(0,10),w=d.filter(y=>!y.status.finished&&!y.status.cancelled).sort((y,C)=>new Date(y.status.utcTime).getTime()-new Date(C.status.utcTime).getTime()).slice(0,10),a=u.overview?.teamForm?.slice(0,5).map(y=>y.result).join(""),g=a||h(f.slice(0,5),e),b=u.overview?.table?.all?.find(y=>y.id.toString()===e)?.idx,v=c?m(c.status.utcTime):void 0;return{...u,calculated:{upcomingMatch:c||null,ongoingMatch:i,previousMatches:f,nextMatches:w,currentLeaguePosition:b,recentFormString:g,nextMatchCountdown:v,teamFormResults:a}}},h=(u,d)=>u.length?u.map(c=>{let i=c.home.id.toString()===d,f=i?c.home.score:c.away.score,w=i?c.away.score:c.home.score;return f>w?"W":f<w?"L":"D"}).join(""):"",m=u=>{let d=new Date(u),c=new Date,i=d.getTime()-c.getTime();if(i<=0)return"Match started";let f=Math.floor(i/(1e3*60*60*24)),w=Math.floor(i%(1e3*60*60*24)/(1e3*60*60)),a=Math.floor(i%(1e3*60*60)/(1e3*60));return f>0?`${f}d ${w}h`:w>0?`${w}h ${a}m`:`${a}m`};return r||!t?{data:{tabs:[],allAvailableSeasons:[],details:{id:0,type:"",name:""},overview:{season:"",selectedSeason:"",table:void 0,topPlayers:[],venue:{id:0,name:"",lat:0,long:0,capacity:0,city:"",country:{name:"",code:""}},coachHistory:[],overviewFixtures:[],teamForm:[],hasOngoingMatch:!1,previousFixturesUrl:"",teamColors:{primary:"",secondary:"",text:""}},fixtures:{allFixtures:{fixtures:[],nextMatch:null,lastMatch:null},primaryTournamentId:0,previousFixturesUrl:"",hasOngoingMatch:!1},stats:{teamId:0,primaryLeagueId:0,primarySeasonId:0,players:[],tournamentId:0,tournamentSeasons:[]},transfers:{type:"",data:{transfers:{transfersIn:[],transfersOut:[]}}},calculated:{upcomingMatch:null,ongoingMatch:null,previousMatches:[],nextMatches:[],currentLeaguePosition:void 0,recentFormString:void 0,nextMatchCountdown:void 0,teamFormResults:void 0}},error:n,isLoading:r}:n?{data:{tabs:[],allAvailableSeasons:[],details:{id:0,type:"",name:""},overview:{season:"",selectedSeason:"",table:void 0,topPlayers:[],venue:{id:0,name:"",lat:0,long:0,capacity:0,city:"",country:{name:"",code:""}},coachHistory:[],overviewFixtures:[],teamForm:[],hasOngoingMatch:!1,previousFixturesUrl:"",teamColors:{primary:"",secondary:"",text:""}},fixtures:{allFixtures:{fixtures:[],nextMatch:null,lastMatch:null},primaryTournamentId:0,previousFixturesUrl:"",hasOngoingMatch:!1},stats:{teamId:0,primaryLeagueId:0,primarySeasonId:0,players:[],tournamentId:0,tournamentSeasons:[]},transfers:{type:"",data:{transfers:{transfersIn:[],transfersOut:[]}}},calculated:{upcomingMatch:null,ongoingMatch:null,previousMatches:[],nextMatches:[],currentLeaguePosition:void 0,recentFormString:void 0,nextMatchCountdown:void 0,teamFormResults:void 0}},error:n,isLoading:!1}:{data:l(t),error:n,isLoading:!1}}function Y(e){let t=new Date,n=new Date(t);n.setDate(n.getDate()-1);let r=new Date(t);r.setDate(r.getDate()+1);let l=new Date(e).toLocaleDateString("en-US",{weekday:"short"}),h=new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),m=new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),u=new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"});return ne(t,e)?`${u}, today`:ne(n,e)?`${u}, yesterday`:ne(r,e)?`${u}, tomorrow`:He(t,e)?`${u}, ${l}`:Ke(t,e)?`${u}, ${h}`:`${u}, ${m}`}function ne(e,t){return new Date(t).getDate()===e.getDate()&&new Date(t).getMonth()===e.getMonth()&&new Date(t).getFullYear()===e.getFullYear()}function He(e,t){let n=new Date(e.setDate(e.getDate()-e.getDay())),r=new Date(e.setDate(e.getDate()-e.getDay()+6));return new Date(t)>=n&&new Date(t)<=r}function Ke(e,t){return new Date(t).getFullYear()===e.getFullYear()}function z(e){return`https://images.fotmob.com/image_resources/logo/teamlogo/${e}.png`}function X(e,t="light"){return`https://images.fotmob.com/image_resources/logo/leaguelogo/${t}/${e}.png`}function $e(e){return`https://www.fotmob.com/match/${e}`}function ae(e){return`https://www.fotmob.com/teams/${e}`}var o=require("@raycast/api");var Q=require("@raycast/api");async function we(e){try{await(0,Q.launchCommand)({name:"match-detail",type:Q.LaunchType.UserInitiated,arguments:{matchId:e.toString()}})}catch(t){console.error("Failed to launch match detail command:",t)}}var ee=require("@raycast/api");function se(e){return(0,ee.launchCommand)({name:"team",type:ee.LaunchType.UserInitiated,arguments:{teamId:e}})}var ke=require("@raycast/api"),xe=require("react/jsx-runtime");function A({title:e,...t}){let n=(()=>{if(!e||typeof e!="string")return"Unknown Item";let r=e.trim();return!r||r==="null"||r==="undefined"?"Unknown Item":r})();return(0,xe.jsx)(ke.List.Item,{...t,title:n})}var S=require("react/jsx-runtime");function j({match:e,additionalActions:t,showTeamActions:n=!0,...r}){let l=J();if(!e)return(0,S.jsx)(A,{title:"No Match Data",subtitle:"Match information is missing",icon:o.Icon.ExclamationMark,...r});if(!e.home||!e.away||!e.status||!e.tournament)return(0,S.jsx)(A,{title:"Invalid Match Data",subtitle:"Match information is incomplete",icon:o.Icon.ExclamationMark,...r});if(!e.home.name||!e.away.name)return(0,S.jsx)(A,{title:"Unknown Teams",subtitle:"Team names are missing",icon:o.Icon.ExclamationMark,...r});let h=e.status?.ongoing===!0?"ongoing":e.status?.finished===!0?"finished":e.status?.cancelled===!0?"postponed":"not-started",m=e.result!=null?e.result>0?"win":e.result<0?"lose":"draw":"not-started",u=(()=>{if(h==="ongoing")return{source:o.Icon.PlayFilled,tintColor:o.Color.Green};if(h==="finished")switch(m){case"win":return{source:o.Icon.CheckCircle,tintColor:o.Color.Green};case"lose":return{source:o.Icon.XMarkCircleFilled,tintColor:o.Color.Red};case"draw":return{source:o.Icon.MinusCircleFilled,tintColor:o.Color.Yellow}}return h==="postponed"?{source:o.Icon.XMarkCircleFilled,tintColor:o.Color.Red}:{source:o.Icon.Calendar,tintColor:o.Color.Blue}})(),d=(()=>{let i=e.home?.name?.trim()||"Home Team",f=e.away?.name?.trim()||"Away Team",w=e.home?.score??0,a=e.away?.score??0,g="";return h==="ongoing"?g=`${e.status?.liveTime?.short??"On"} | ${i} ${w} - ${a} ${f}`:h==="finished"?g=`${e.status?.reason?.short??"FT"} | ${i} ${w} - ${a} ${f}`:h==="postponed"?g=`${e.status?.reason?.short??"PP"} | ${i} - ${f}`:g=`${i} - ${f}`,g.trim()||`Match ${e.id||"Unknown"}`})(),c=()=>{let i=l.teams.some(g=>g.id===e.home?.id?.toString()),f=l.teams.some(g=>g.id===e.away?.id?.toString()),w={id:e.home?.id?.toString()||"",name:e.home?.name||"Home Team",leagueId:e.tournament?.leagueId?.toString()||""},a={id:e.away?.id?.toString()||"",name:e.away?.name||"Away Team",leagueId:e.tournament?.leagueId?.toString()||""};return(0,S.jsxs)(o.ActionPanel,{children:[(0,S.jsxs)(o.ActionPanel.Section,{title:"Match Actions",children:[(0,S.jsx)(o.Action,{icon:o.Icon.AppWindowSidebarRight,title:"Show Match Details",onAction:()=>{we(`${e.id}`)}}),(0,S.jsx)(o.Action.OpenInBrowser,{icon:o.Icon.Globe,title:"View Match on Fotmob",url:$e(e.id)}),(0,S.jsx)(o.Action.CopyToClipboard,{icon:o.Icon.Clipboard,title:`Copy Match ID (${e.id})`,content:e.id?.toString()||"",shortcut:{modifiers:["cmd"],key:"."}})]}),n&&(0,S.jsxs)(o.ActionPanel.Section,{title:"Team Actions",children:[(0,S.jsx)(o.Action,{icon:o.Icon.Person,title:`View ${e.home?.name||"Home Team"} Details`,onAction:()=>{se(`${e.home?.id||0}`)},shortcut:{modifiers:["cmd","shift"],key:"h"}}),(0,S.jsx)(o.Action,{icon:o.Icon.Person,title:`View ${e.away?.name||"Away Team"} Details`,onAction:()=>{se(`${e.away?.id||0}`)},shortcut:{modifiers:["cmd","shift"],key:"a"}}),(0,S.jsx)(o.Action.OpenInBrowser,{icon:o.Icon.Globe,title:`View ${e.home?.name||"Home Team"} on Fotmob`,url:ae(e.home?.id||0)}),(0,S.jsx)(o.Action.OpenInBrowser,{icon:o.Icon.Globe,title:`View ${e.away?.name||"Away Team"} on Fotmob`,url:ae(e.away?.id||0)})]}),n&&(0,S.jsxs)(o.ActionPanel.Section,{title:"Team Favorites",children:[(0,S.jsx)(o.Action.CopyToClipboard,{icon:o.Icon.Clipboard,title:`Copy ${e.home?.name||"Home Team"} ID (${e.home?.id})`,content:e.home?.id?.toString()||"",shortcut:{modifiers:["cmd","shift"],key:"."}}),(0,S.jsx)(o.Action.CopyToClipboard,{icon:o.Icon.Clipboard,title:`Copy ${e.away?.name||"Away Team"} ID (${e.away?.id})`,content:e.away?.id?.toString()||"",shortcut:{modifiers:["cmd","shift"],key:"."}}),i?(0,S.jsx)(o.Action,{icon:o.Icon.StarDisabled,title:"Remove",onAction:async()=>{await l.removeItems("team",e.home?.id?.toString()||""),(0,o.showToast)({style:o.Toast.Style.Success,title:"Removed from favorites",message:`${e.home?.name} removed from favorites`})},shortcut:{modifiers:["cmd","shift"],key:"d"}}):(0,S.jsx)(o.Action,{icon:o.Icon.Star,title:`Add ${e.home?.name||"Home Team"} to Favorites`,onAction:async()=>{await l.addItems({type:"team",value:w}),(0,o.showToast)({style:o.Toast.Style.Success,title:"Added to favorites",message:`${e.home?.name} added to favorites`})},shortcut:{modifiers:["cmd","shift"],key:"f"}}),f?(0,S.jsx)(o.Action,{icon:o.Icon.StarDisabled,title:"Remove",onAction:async()=>{await l.removeItems("team",e.away?.id?.toString()||""),(0,o.showToast)({style:o.Toast.Style.Success,title:"Removed from favorites",message:`${e.away?.name} removed from favorites`})},shortcut:{modifiers:["cmd","shift"],key:"d"}}):(0,S.jsx)(o.Action,{icon:o.Icon.Star,title:`Add ${e.away?.name||"Away Team"} to Favorites`,onAction:async()=>{await l.addItems({type:"team",value:a}),(0,o.showToast)({style:o.Toast.Style.Success,title:"Added to favorites",message:`${e.away?.name} added to favorites`})},shortcut:{modifiers:["cmd","shift"],key:"f"}})]}),t&&(0,S.jsx)(o.ActionPanel.Section,{title:"Additional Actions",children:t})]})};return(0,S.jsx)(A,{...r,title:d,subtitle:Y(e.status?.utcTime||""),icon:u,accessories:[{icon:X(e.tournament?.leagueId||0,"dark"),tag:e.tournament?.name||"Tournament"},{icon:z(e.home?.id||0),tooltip:e.home?.name||"Home Team"},{icon:z(e.away?.id||0),tooltip:e.away?.name||"Away Team"}],actions:c()})}var p=require("react/jsx-runtime");function ie({id:e}){let{data:t,isLoading:n,error:r}=be(e),l=J();if(n)return(0,p.jsx)(s.List,{isLoading:!0});if(r)return(0,p.jsx)(s.List,{isLoading:!1,children:(0,p.jsx)(s.List.EmptyView,{icon:s.Icon.ExclamationMark,title:"Error Loading Team Details",description:r.message||"Failed to load team information"})});if(!t||!t.fixtures)return(0,p.jsx)(s.List,{isLoading:!1,children:(0,p.jsx)(s.List.EmptyView,{icon:s.Icon.QuestionMark,title:"No Team Data",description:"Unable to find information for this team"})});let h=t?.details?.name?.trim()||`Team ${e}`,m=t?.calculated?.ongoingMatch,u=t?.calculated?.nextMatches?.slice(0,8)||[],d=t?.calculated?.previousMatches?.slice(0,8)||[],c=a=>a?a.split("").map(g=>{switch(g){case"W":return"\u{1F7E2}";case"D":return"\u{1F7E1}";case"L":return"\u{1F534}";default:return""}}).join(" "):"",i=h?.trim()&&h!=="undefined"&&h!=="null"?h:`Team ${e}`,f=l.teams.some(a=>a.id===e),w={id:e,name:i,leagueId:t?.details?.primaryLeagueId?.toString()||""};return(0,p.jsxs)(s.List,{navigationTitle:`${i} - Team Details`,children:[(0,p.jsxs)(s.List.Section,{title:"Team Overview",children:[(0,p.jsx)(A,{title:i,subtitle:`${t?.details?.country||""} \u2022 ${t?.details?.latestSeason||"Current Season"}`,icon:z(parseInt(e)),accessories:[...t?.details?.shortName?[{text:t.details.shortName}]:[],...t?.calculated?.currentLeaguePosition?[{text:`League Position: ${t.calculated.currentLeaguePosition}`,icon:s.Icon.Trophy}]:[]],actions:(0,p.jsxs)(s.ActionPanel,{children:[(0,p.jsx)(s.Action.OpenInBrowser,{icon:s.Icon.Globe,title:"View Team on Fotmob",url:`https://www.fotmob.com/teams/${e}`}),(0,p.jsx)(s.Action.CopyToClipboard,{icon:s.Icon.Clipboard,title:`Copy Team ID (${e})`,content:e,shortcut:{modifiers:["cmd"],key:"."}}),f?(0,p.jsx)(s.Action,{icon:s.Icon.StarDisabled,title:"Remove from Favorites",onAction:async()=>{await l.removeItems("team",e),(0,s.showToast)({style:s.Toast.Style.Success,title:"Removed from favorites",message:`${i} removed from favorites`})},shortcut:{modifiers:["cmd"],key:"d"}}):(0,p.jsx)(s.Action,{icon:s.Icon.Star,title:"Add to Favorites",onAction:async()=>{await l.addItems({type:"team",value:w}),(0,s.showToast)({style:s.Toast.Style.Success,title:"Added to favorites",message:`${i} added to favorites`})},shortcut:{modifiers:["cmd"],key:"f"}})]})}),t?.overview?.venue?.name&&(0,p.jsx)(A,{title:t.overview.venue.name,subtitle:`Home Stadium \u2022 ${t.overview.venue.city||"Unknown City"}, ${t.overview.venue.country?.name||""}`,icon:s.Icon.Building,accessories:[{text:`Capacity: ${t.overview.venue.capacity?.toLocaleString()||"Unknown"}`},...t.overview.venue.opened?[{text:`Opened: ${t.overview.venue.opened}`}]:[]]}),t?.details?.primaryLeagueName&&(0,p.jsx)(A,{title:t.details.primaryLeagueName,subtitle:"Primary League",icon:t.details.primaryLeagueId?X(t.details.primaryLeagueId,"dark"):s.Icon.Trophy,accessories:[{text:t.overview?.season||"Current Season"}]}),(t?.calculated?.teamFormResults||t?.calculated?.recentFormString)&&(0,p.jsx)(A,{title:"Recent Form",subtitle:c(t.calculated.teamFormResults||t.calculated.recentFormString||"")||"No recent form data",icon:s.Icon.BarChart,accessories:[{text:`Last ${(t.calculated.teamFormResults||t.calculated.recentFormString||"").length} matches`}]}),t?.calculated?.upcomingMatch&&t?.calculated?.nextMatchCountdown&&(0,p.jsx)(A,{title:"Next Match",subtitle:`${t.calculated.upcomingMatch.home?.name||"Home"} vs ${t.calculated.upcomingMatch.away?.name||"Away"}`,icon:s.Icon.Clock,accessories:[{text:t.calculated.nextMatchCountdown},{text:Y(t.calculated.upcomingMatch.status?.utcTime||"")}]})]}),t?.overview?.table?.all&&Array.isArray(t.overview.table.all)&&t.overview.table.all.length>0&&(0,p.jsx)(s.List.Section,{title:"League Position",children:t.overview.table.all.filter(a=>a?.id?.toString()===e).map(a=>{let g=a?.name||"Unknown Team",b=a?.idx||0,v=a?.pts||0,y=a?.played||0;return(0,p.jsx)(A,{title:`${b}. ${g}`,subtitle:`${v} points \u2022 ${y} played`,icon:b<=4?{source:s.Icon.Trophy,tintColor:s.Color.Green}:b<=6?{source:s.Icon.Star,tintColor:s.Color.Blue}:s.Icon.Dot,accessories:[{text:`${a?.wins||0}W ${a?.draws||0}D ${a?.losses||0}L`},{text:a?.scoresStr||"0-0"},{text:`GD: ${(a?.goalConDiff||0)>0?"+":""}${a?.goalConDiff||0}`,icon:{source:(a?.goalConDiff||0)>=0?s.Icon.ArrowUp:s.Icon.ArrowDown,tintColor:(a?.goalConDiff||0)>=0?s.Color.Green:s.Color.Red}}]},a?.id||`team-${Math.random()}`)})}),t?.overview?.topPlayers&&Array.isArray(t.overview.topPlayers)&&t.overview.topPlayers.length>0&&(0,p.jsx)(s.List.Section,{title:"Top Players",children:t.overview.topPlayers.slice(0,5).map(a=>{let g=a?.name||"Unknown Player",b=a?.goals||0,v=a?.assists||0,y=a?.rating||0,C=a?.cname||"";return(0,p.jsx)(A,{title:g,subtitle:`${b} goals \u2022 ${v} assists`,icon:s.Icon.Person,accessories:[{text:`Rating: ${y.toFixed(1)}`},...C?[{text:C}]:[],...a?.injured?[{icon:{source:s.Icon.XMarkCircle,tintColor:s.Color.Red}}]:[]]},a?.id||`player-${Math.random()}`)})}),(()=>{let a=t?.overview?.teamColors;if(!a)return null;let g=a.primary&&a.primary!=="Unknown"&&a.primary.trim()!==""&&a.primary.toLowerCase()!=="unknown",b=a.secondary&&a.secondary!=="Unknown"&&a.secondary.trim()!==""&&a.secondary.toLowerCase()!=="unknown",v=a.text&&a.text!=="Unknown"&&a.text.trim()!==""&&a.text.toLowerCase()!=="unknown";if(!g&&!b&&!v)return null;let y=C=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(C);return(0,p.jsx)(s.List.Section,{title:"Team Colors",children:(0,p.jsx)(A,{title:"Team Colors",subtitle:g&&b?`Primary: ${y(a.primary)?a.primary.toUpperCase():a.primary} \u2022 Secondary: ${y(a.secondary)?a.secondary.toUpperCase():a.secondary}`:g?`Primary: ${y(a.primary)?a.primary.toUpperCase():a.primary}`:b?`Secondary: ${y(a.secondary)?a.secondary.toUpperCase():a.secondary}`:"Color information available",icon:g&&y(a.primary)?{source:s.Icon.Circle,tintColor:a.primary}:s.Icon.Circle,accessories:[...v?[{text:`Text: ${a.text}`}]:[]]})})})(),m?.id&&(0,p.jsx)(s.List.Section,{title:"Live Match",children:(0,p.jsx)(j,{match:m},m.id)}),u?.length>0&&u.filter(a=>a?.id).length>0&&(0,p.jsx)(s.List.Section,{title:"Upcoming Matches",children:u.filter(a=>a?.id&&a?.home&&a?.away).map(a=>(0,p.jsx)(j,{match:a},a.id))}),d?.length>0&&d.filter(a=>a?.id).length>0&&(0,p.jsx)(s.List.Section,{title:"Recent Matches",children:d.filter(a=>a?.id&&a?.home&&a?.away).map(a=>(0,p.jsx)(j,{match:a},a.id))}),t?.squad&&Array.isArray(t.squad)&&t.squad.length>0&&(0,p.jsxs)(s.List.Section,{title:"Squad",children:[t.squad.slice(0,8).map(a=>{let g=a?.name||"Unknown Player",b=a?.position?.strPos||"Player",v=a?.shirtNo,y=a?.age,C=a?.country?.code;return(0,p.jsx)(A,{title:g,subtitle:b,icon:s.Icon.Person,accessories:[...v?[{text:`#${v}`}]:[],...y?[{text:`${y}y`}]:[],...C?[{text:C}]:[],...a?.injured?[{icon:{source:s.Icon.XMarkCircle,tintColor:s.Color.Red}}]:[],...a?.suspended?[{icon:{source:s.Icon.ExclamationMark,tintColor:s.Color.Orange}}]:[]]},a?.id||`squad-${Math.random()}`)}),t.squad.length>8&&(0,p.jsx)(A,{title:`View All ${t.squad.length} Players`,subtitle:"Complete squad information",icon:s.Icon.Person})]}),t?.transfers?.data?.transfers&&(0,p.jsxs)(p.Fragment,{children:[t.transfers.data.transfers.transfersIn&&Array.isArray(t.transfers.data.transfers.transfersIn)&&t.transfers.data.transfers.transfersIn.length>0&&(0,p.jsx)(s.List.Section,{title:"Recent Signings",children:t.transfers.data.transfers.transfersIn.slice(0,3).map((a,g)=>{let b=a?.name||"Unknown Player",v=a?.fromClub||"Unknown Club",y=a?.fromDate,C=a?.fee?.feeText||"Fee undisclosed",E=a?.onLoan;return(0,p.jsx)(A,{title:b,subtitle:`Signed from ${v}`,icon:{source:s.Icon.ArrowRight,tintColor:s.Color.Green},accessories:[{text:y?new Date(y).toLocaleDateString():"Unknown date"},{text:C},...E?[{text:"Loan"}]:[]]},`in-${a?.playerId||g}-${g}`)})}),t.transfers.data.transfers.transfersOut&&Array.isArray(t.transfers.data.transfers.transfersOut)&&t.transfers.data.transfers.transfersOut.length>0&&(0,p.jsx)(s.List.Section,{title:"Recent Departures",children:t.transfers.data.transfers.transfersOut.slice(0,3).map((a,g)=>{let b=a?.name||"Unknown Player",v=a?.toClub||"Unknown Club",y=a?.fromDate,C=a?.fee?.feeText||"Fee undisclosed",E=a?.onLoan;return(0,p.jsx)(A,{title:b,subtitle:`Sold to ${v}`,icon:{source:s.Icon.ArrowLeft,tintColor:s.Color.Red},accessories:[{text:y?new Date(y).toLocaleDateString():"Unknown date"},{text:C},...E?[{text:"Loan"}]:[]]},`out-${a?.playerId||g}-${g}`)})})]})]})}var te=require("react/jsx-runtime");function ve(e){let{teamId:t}=e.arguments,{pop:n}=(0,U.useNavigation)();return!t||Number.isNaN(Number(t))?((0,U.showToast)({title:"Team ID must be a number",message:"Please enter a valid team ID",style:U.Toast.Style.Failure,primaryAction:{title:"Retry",onAction:()=>{n()}}}),(0,te.jsx)(U.List,{children:(0,te.jsx)(U.List.EmptyView,{icon:U.Icon.XMarkCircleFilled,description:"Team ID must be a number"})})):(0,te.jsx)(ie,{id:t})}
